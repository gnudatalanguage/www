# GDL on Windows
## Download the ```GDL Installer```

- Found in [Weekly builds](https://github.com/gnudatalanguage/gdl/releases/tag/weekly-release) and all our [Releases](https://github.com/gnudatalanguage/gdl/releases)

It will install GDL on your machine automatically. For 64 bit builds, you can also choose whether to install ```GDL Workbench```, an Eclipse-based IDE for GDL (for more information, visit https://github.com/gnudatalanguage/gdlde). 

Do not panic, if the weekly relase has no windows installer, you can still get one using the compilation method below.

Currently, there are three different types of builds:
- mini: only includes mandatory libraries to run a very minimal and barely useable GDL.
- full: includes all optional libraries except MPI. This is the one you should use.
- full-msmpi: includes all optional libraries + MPI. This requires Microsoft MPI pre-installed (https://docs.microsoft.com/en-us/message-passing-interface/microsoft-mpi). This version of GDL is slightly slow at startup due to the initialization of MPI.

## Automatic CI builds

In addition to the weekly builds, automatic CI builds of GDL from the master branch of GitHub repository are also available (both 64-bit and 32-bit builds, both Debug and Release configurations) on the Github Actions page, at https://github.com/gnudatalanguage/gdl/actions.

## Compilation

To compile GDL locally, follow the below steps:
1. Download and install [MSYS2](https://www.msys2.org/).  When complete, run "MSYS MinGW 64-bit" from Start menu.
2. Set environment variables.
```shell
$ export ROOT_DIR=/path/to/store/everything
$ export Platform=x86_64 # or 'i686' for 32 bit build
$ export DEPS=standard # or 'debug' or 'headless'
$ export Configuration=Release # or 'Debug'. linking of GDL in 'Debug' is *extremely slow* 
```
2. Install packages to compile GDL.
```shell
$ pacman -S mingw-w64-${Platform}-toolchain mingw-w64-${Platform}-cmake mingw-w64-${Platform}-nsis zip unzip tar zstd git base-devel
```
3. cd to `ROOT_DIR` and clone GDL.
```shell
$ cd $ROOT_DIR
$ git clone --recursive https://github.com/gnudatalanguage/gdl
```
2. Build GDL:
```shell
$ gdl/scripts/build_gdl.sh prep # download external libararies
$ gdl/scripts/build_gdl.sh configure # run CMake to prepare the make file
$ gdl/scripts/build_gdl.sh build # build GDL
$ gdl/scripts/build_gdl.sh install # install GDL
$ ls install # compiled results will be here
```
3. (Optional) run tests:
```shell
$ gdl/scripts/build_gdl.sh check
```
4. **IMPORTANT:**  package GDL into zip and NSIS installer:
```shell
$ export GDLDE_VERSION=v1.0.0 # replace this with any newer release
$ gdl/scripts/build_gdl.sh pack
$ ls package # packages will be here
$ gdl/scripts/build_gdl.sh prep_deploy
(then use the installer freshly created in gdl/)
```
It is recommended to use `gdl/scripts/build_gdl.sh build` (instead of just "make") anytime you download a new version of GDL sources, as the script adds magic of its own.

**IMPORTANT:** You may be able to call directly `$ gdl` once step 2 is done, but we recommend to build and use the installer just made above (`gdl/scripts/build_gdl.sh pack`) to install the new GDL (more windows-like).